"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[8797],{8797:function(e,t,a){a.r(t),a.d(t,{default:function(){return $t}});var s=a(6768),n=a(5130),o=a(4232);const l={class:"hstack gap-3 h-100 align-items-center justify-content-start w-100"},i={class:"d-flex flex-column align-items-center justify-content-start text-dark h-100 w-100 gap-2 overflow-auto"},r={key:0,class:"card w-100"},c={class:"card-body hstack justify-content-between"},d={class:"btn-group"},m={class:"dropdown-menu dropdown-menu-end",id:"sortBtn",style:{width:"300px"}},u={class:"container vstack p-3 gap-2"},p={class:"vstack gap-2"},b={class:"vstack gap-2"},h={class:"vstack gap-2"},k={class:"hstack justify-content-end gap-2 mt-2"},f={class:"hstack gap-2"},g={class:"card w-100 h-100 overflow-auto"},L={key:0,class:"card-header hstack justify-content-between"},v={class:"hstack gap-2"},C={key:1,class:"card-header p-3 hstack"},y={class:"m-0"},w={class:"card-body overflow-hidden position-relative p-0",style:{height:"100%","min-height":"400px"}},_={class:"page w-100 flex-shrink-0"},x={class:"table table-hover align-middle mb-0 table-bordered"},E={class:"table-light"},B={key:0},F=["colspan"],A=["onClick"],D={key:2,class:"text-center"},M=["colspan"],P={class:"page w-100 flex-shrink-0"},X={class:"nav nav-tabs gap-1"},U={class:"nav-item"},S={class:"nav-item"},N={class:"nav-item"},T={class:"w-100 h-100 p-3"},I={key:0},W={key:1},q={key:2},V={class:"modal fade",id:"addNewCampus"};function j(e,t,a,j,J,$){const Y=(0,s.g2)("CampusEditor"),K=(0,s.g2)("CampusBranches"),O=(0,s.g2)("DepartmentPage"),R=(0,s.g2)("AddNewCampus");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",i,[1===J.page?((0,s.uX)(),(0,s.CE)("div",r,[t[22]||(t[22]=(0,s.Lk)("div",{class:"card-header"},"Data Management",-1)),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[t[20]||(t[20]=(0,s.Lk)("button",{type:"button",class:"btn btn-secondary dropdown-toggle","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[(0,s.Lk)("i",{class:"bi bi-filter me-2"}),(0,s.Lk)("span",{class:"me-2"},"Sort")],-1)),(0,s.Lk)("ul",m,[(0,s.Lk)("div",u,[t[19]||(t[19]=(0,s.Lk)("h6",{class:"fw-bold"},"Sort Option",-1)),(0,s.Lk)("div",p,[t[14]||(t[14]=(0,s.Lk)("label",{for:"sort",class:"m-0"},"Sort By:",-1)),(0,s.bo)((0,s.Lk)("select",{name:"sort",id:"sort",class:"form-select","onUpdate:modelValue":t[0]||(t[0]=e=>J.params.sort=e),onChange:t[1]||(t[1]=(...e)=>$.fetchCampuses&&$.fetchCampuses(...e))},t[13]||(t[13]=[(0,s.Lk)("option",{value:""},"Sort By",-1),(0,s.Lk)("option",{value:"name"},"Name",-1),(0,s.Lk)("option",{value:"created_at"},"Date Added",-1)]),544),[[n.u1,J.params.sort]])]),(0,s.Lk)("div",b,[t[16]||(t[16]=(0,s.Lk)("label",{for:"order",class:"m-0"},"Order By:",-1)),(0,s.bo)((0,s.Lk)("select",{name:"order",id:"order",class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>J.params.order=e),onChange:t[3]||(t[3]=(...e)=>$.fetchCampuses&&$.fetchCampuses(...e))},t[15]||(t[15]=[(0,s.Lk)("option",{value:""},"Order By",-1),(0,s.Lk)("option",{value:"asc"},"Ascending",-1),(0,s.Lk)("option",{value:"desc"},"Descending",-1)]),544),[[n.u1,J.params.order]])]),(0,s.Lk)("div",h,[t[18]||(t[18]=(0,s.Lk)("label",{for:"status",class:"m-0"},"Status:",-1)),(0,s.bo)((0,s.Lk)("select",{name:"status",id:"status",class:"form-select","onUpdate:modelValue":t[4]||(t[4]=e=>J.params.status=e),onChange:t[5]||(t[5]=(...e)=>$.fetchCampuses&&$.fetchCampuses(...e))},t[17]||(t[17]=[(0,s.Lk)("option",{value:"",selected:""},"All",-1),(0,s.Lk)("option",{value:"0"},"Inactive",-1),(0,s.Lk)("option",{value:"1"},"Active",-1)]),544),[[n.u1,J.params.status]])]),(0,s.Lk)("div",k,[(0,s.Lk)("button",{class:"btn btn-success","data-bs-dismiss":"dropdown",onClick:t[6]||(t[6]=(...t)=>e.applySort&&e.applySort(...t))},"Apply")])])])]),(0,s.Lk)("div",f,[(0,s.bo)((0,s.Lk)("input",{type:"search",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>J.params.query=e),placeholder:"Search campus...",style:{width:"350px"}},null,512),[[n.Jo,J.params.query]]),t[21]||(t[21]=(0,s.Lk)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addNewCampus"},[(0,s.Lk)("i",{class:"bi bi-building-add me-2"}),(0,s.eW)("Add Campus")],-1))])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",g,[1===J.page?((0,s.uX)(),(0,s.CE)("div",L,[t[24]||(t[24]=(0,s.Lk)("h5",{class:"m-0"},[(0,s.Lk)("i",{class:"bi bi-building ms-2 me-3"}),(0,s.eW)("Campus List")],-1)),(0,s.Lk)("div",v,[(0,s.Lk)("button",{class:"btn btn-outline-dark",style:{width:"100px"},onClick:t[8]||(t[8]=e=>$.refresh())},t[23]||(t[23]=[(0,s.Lk)("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),(0,s.eW)("Refresh")]))])])):((0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("button",{class:"btn btn-transparent",onClick:t[9]||(t[9]=(...e)=>$.goBack&&$.goBack(...e))},t[25]||(t[25]=[(0,s.Lk)("i",{class:"bi bi-chevron-left"},null,-1)])),(0,s.Lk)("h5",y,[t[26]||(t[26]=(0,s.Lk)("i",{class:"bi bi-building ms-2 me-3"},null,-1)),(0,s.eW)((0,o.v_)(J.selectedCampus.name),1)])])),(0,s.Lk)("div",w,[(0,s.Lk)("div",{class:"slider-wrapper d-flex transition-all",style:(0,o.Tr)({transform:1===J.page?"translateX(0%)":"translateX(-100%)"})},[(0,s.Lk)("div",_,[(0,s.Lk)("table",x,[(0,s.Lk)("thead",E,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(J.columns,(e,t)=>((0,s.uX)(),(0,s.CE)("th",{key:t,style:(0,o.Tr)(e.style)},(0,o.v_)(e.label),5))),128))])]),(0,s.Lk)("tbody",null,[J.fetchingCampuses?((0,s.uX)(),(0,s.CE)("tr",B,[(0,s.Lk)("td",{colspan:$.columnCount},t[27]||(t[27]=[(0,s.Lk)("p",{class:"placeholder-glow mb-0"},[(0,s.Lk)("span",{class:"placeholder col-12"})],-1)]),8,F)])):J.campuses&&J.campuses.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(J.campuses,(e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,o.v_)(t+1),1),(0,s.Lk)("td",null,(0,o.v_)(e.abbrev),1),(0,s.Lk)("td",null,(0,o.v_)(e.name),1),(0,s.Lk)("td",null,(0,o.v_)(e.address),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t=>$.goToDetails(e)},"Details",8,A)])]))),128)):((0,s.uX)(),(0,s.CE)("tr",D,[(0,s.Lk)("td",{colspan:$.columnCount},"No data to show.",8,M)]))])])]),(0,s.Lk)("div",P,[(0,s.Lk)("ul",X,[(0,s.Lk)("li",U,[(0,s.Lk)("button",{class:(0,o.C4)(["nav-link",{active:1==J.infoPage}]),onClick:t[10]||(t[10]=e=>J.infoPage=1)},"Campus Information",2)]),(0,s.Lk)("li",S,[(0,s.Lk)("button",{class:(0,o.C4)(["nav-link",{active:2==J.infoPage}]),onClick:t[11]||(t[11]=e=>J.infoPage=2)},"Branches",2)]),(0,s.Lk)("li",N,[(0,s.Lk)("button",{class:(0,o.C4)(["nav-link",{active:3==J.infoPage}]),onClick:t[12]||(t[12]=e=>J.infoPage=3)},"Departments",2)])]),(0,s.Lk)("div",T,[1===J.infoPage?((0,s.uX)(),(0,s.CE)("div",I,[(0,s.bF)(Y,{campus:J.selectedCampus},null,8,["campus"])])):2===J.infoPage?((0,s.uX)(),(0,s.CE)("div",W,[(0,s.bF)(K,{campus_id:J.selectedCampus?.id},null,8,["campus_id"])])):3===J.infoPage?((0,s.uX)(),(0,s.CE)("div",q,[(0,s.bF)(O,{campus_id:J.selectedCampus?.id},null,8,["campus_id"])])):(0,s.Q3)("",!0)])])],4)]),(0,s.Lk)("div",V,[(0,s.bF)(R,{"onAdd:campus":$.addCampus},null,8,["onAdd:campus"])])])])])}var J=a(223);const $={campusStatus:{0:"Not Active",1:"Active"},sex:{0:"Female",1:"Male"},roles:{0:"Super Admin",1:"Admin",2:"Student"}},Y=e=>Array.isArray(e)&&0===e.length,K=(e,t)=>$[e]?.[t]??"Unknown";var O=a(8077);const R={class:"modal-dialog"},Q={class:"modal-content"},H={class:"modal-body"},z={class:""},G={class:""},Z={class:""};function ee(e,t,a,o,l,i){return(0,s.uX)(),(0,s.CE)("div",R,[(0,s.Lk)("div",Q,[t[8]||(t[8]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"m-0"},[(0,s.Lk)("i",{class:"bi bi-building me-2"}),(0,s.eW)(" Add New Campus")]),(0,s.Lk)("button",{class:"btn-close","data-bs-dismiss":"modal"})],-1)),(0,s.Lk)("div",H,[(0,s.Lk)("form",{class:"vstack gap-3",onSubmit:t[3]||(t[3]=(0,n.D$)((...e)=>i.addCampus&&i.addCampus(...e),["prevent"]))},[(0,s.Lk)("div",z,[t[4]||(t[4]=(0,s.Lk)("label",{class:"mb-2",for:"name"},"Campus Name",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"name",placeholder:"Echague Campus","onUpdate:modelValue":t[0]||(t[0]=e=>l.campus.name=e),required:""},null,512),[[n.Jo,l.campus.name]])]),(0,s.Lk)("div",G,[t[5]||(t[5]=(0,s.Lk)("label",{class:"mb-2",for:"name"},"Campus Abbreviation",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"name",placeholder:"ISU-AC","onUpdate:modelValue":t[1]||(t[1]=e=>l.campus.abbrev=e),required:""},null,512),[[n.Jo,l.campus.abbrev]])]),(0,s.Lk)("div",Z,[t[6]||(t[6]=(0,s.Lk)("label",{class:"mb-2",for:"name"},"Campus Address",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",id:"name",placeholder:"Full address of the Campus","onUpdate:modelValue":t[2]||(t[2]=e=>l.campus.address=e),required:""},null,512),[[n.Jo,l.campus.address]])]),t[7]||(t[7]=(0,s.Lk)("div",{class:"hstack justify-content-end gap-2 mt-3"},[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"},"Cancel"),(0,s.Lk)("button",{type:"submit",class:"btn btn-success"},"Save")],-1))],32)])])])}var te=a(1661),ae=a(445),se=a(4564),ne={data(){return{campus:{name:"",abbrev:"",address:""}}},methods:{async addCampus(){(0,te.C)({message:"Adding, please wait"});try{const e=await(0,se.MB)("addCampus",this.campus);"success"===e.data.status&&(0,ae.w)({status:"success",title:"Success",message:e.data.message})}catch(e){(0,ae.w)({status:"error",title:"Failed",message:e.message})}finally{this.$emit("add:campus",this.campus)}}}},oe=a(1241);const le=(0,oe.A)(ne,[["render",ee]]);var ie=le;const re={class:"row"},ce={class:"card p-4 shadow-sm col-12 col-xl-8 mx-auto"},de={class:"mb-3"},me={class:"mb-3"},ue={class:"mb-3"},pe={class:"d-flex gap-2 mt-3 justify-content-end"},be=["disabled"],he=["disabled"];function ke(e,t,a,o,l,i){return(0,s.uX)(),(0,s.CE)("div",re,[(0,s.Lk)("div",ce,[t[10]||(t[10]=(0,s.Lk)("h5",{class:"mb-3"},[(0,s.Lk)("i",{class:"bi bi-pencil-square me-2"}),(0,s.eW)("Update Campus Information")],-1)),(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,n.D$)((...e)=>i.updateCampus&&i.updateCampus(...e),["prevent"])),class:"w-100"},[(0,s.Lk)("div",de,[t[5]||(t[5]=(0,s.Lk)("label",{class:"form-label"},"Campus Name",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),class:"form-control",placeholder:"Enter campus name"},null,512),[[n.Jo,l.form.name]])]),(0,s.Lk)("div",me,[t[6]||(t[6]=(0,s.Lk)("label",{class:"form-label"},"Abbreviation",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.form.abbrev=e),class:"form-control",placeholder:"Enter abbreviation"},null,512),[[n.Jo,l.form.abbrev]])]),(0,s.Lk)("div",ue,[t[7]||(t[7]=(0,s.Lk)("label",{class:"form-label"},"Address",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>l.form.address=e),class:"form-control",placeholder:"Enter address"},null,512),[[n.Jo,l.form.address]])]),(0,s.Lk)("div",pe,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:t[3]||(t[3]=(...e)=>i.resetForm&&i.resetForm(...e)),disabled:!i.hasChanges},t[8]||(t[8]=[(0,s.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,s.eW)("Reset")]),8,be),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:!i.hasChanges},t[9]||(t[9]=[(0,s.Lk)("i",{class:"bi bi-save me-2"},null,-1),(0,s.eW)("Update Information")]),8,he)])],32)])])}var fe=a(4874),ge=a.n(fe),Le={props:{campus:Object},data(){return{form:{name:"",abbrev:"",address:""},originalData:{}}},computed:{hasChanges(){return this.form.name!==this.originalData.name||this.form.abbrev!==this.originalData.abbrev||this.form.address!==this.originalData.address}},watch:{campus:{immediate:!0,deep:!0,handler(e){e&&(this.form={...e},this.originalData={...e})}}},methods:{async updateCampus(){if(!this.hasChanges)return;const e=await ge().fire({title:"Confirm Update",text:"Are you sure you want to update this campus information?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"Cancel",reverseButtons:!0});if(e.isConfirmed)try{await ge().fire({title:"Updated!",text:"Campus information has been updated successfully.",icon:"success",timer:2e3,showConfirmButton:!1}),this.originalData={...this.form}}catch(t){ge().fire("Error","Something went wrong while updating.","error")}},async resetForm(){if(!this.hasChanges)return;const e=await ge().fire({title:"Reset Changes?",text:"All unsaved changes will be lost.",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, reset it",cancelButtonText:"Cancel",reverseButtons:!0});e.isConfirmed&&(this.form={...this.originalData},ge().fire({title:"Reset!",text:"Changes have been reverted.",icon:"success",timer:1500,showConfirmButton:!1}))}}};const ve=(0,oe.A)(Le,[["render",ke],["__scopeId","data-v-7068af78"]]);var Ce=ve;const ye={class:"card p-3 shadow-sm"},we={class:"d-flex justify-content-between align-items-center mb-3"},_e={class:"hstack gap-2"},xe={class:"table table-bordered table-hover align-middle position-relative"},Ee={key:0},Be={key:1},Fe={class:"text-center"},Ae=["onClick"],De=["onClick"],Me={key:0,class:"custom-modal-backdrop"},Pe={class:"custom-modal"},Xe={class:"modal-header justify-content-between"},Ue={class:"mb-3"},Se={class:"modal-body"},Ne={class:"mb-2"},Te={class:"mb-2"},Ie={class:"mb-2"},We={class:"row mb-3"},qe={class:"col"},Ve={class:"col"},je={class:"d-flex justify-content-end gap-2"},Je=["disabled"];function $e(e,t,a,l,i,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",ye,[(0,s.Lk)("div",we,[t[12]||(t[12]=(0,s.Lk)("h5",{class:"m-0"},[(0,s.Lk)("i",{class:"bi bi-diagram-3 me-3"}),(0,s.eW)("Campus Branches")],-1)),(0,s.Lk)("div",_e,[(0,s.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>r.openAddForm&&r.openAddForm(...e))},t[10]||(t[10]=[(0,s.Lk)("i",{class:"bi bi-plus-lg me-2"},null,-1),(0,s.eW)("Add Branch")])),(0,s.Lk)("button",{class:"btn btn-outline-dark btn-sm",onClick:t[1]||(t[1]=(...e)=>r.fetchBranches&&r.fetchBranches(...e))},t[11]||(t[11]=[(0,s.Lk)("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),(0,s.eW)("Refresh")]))])]),(0,s.Lk)("table",xe,[t[18]||(t[18]=(0,s.Lk)("thead",{class:"table-light"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"No."),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Contact Info"),(0,s.Lk)("th",null,"Department"),(0,s.Lk)("th",null,"Opening Hour"),(0,s.Lk)("th",null,"Closing Hour"),(0,s.Lk)("th",{class:"text-center"},"Actions")])],-1)),(0,s.Lk)("tbody",null,[i.fetching?((0,s.uX)(),(0,s.CE)("tr",Ee,t[13]||(t[13]=[(0,s.Lk)("td",{colspan:"7",class:"text-center text-muted"},"Loading...",-1)]))):0===i.branches.length?((0,s.uX)(),(0,s.CE)("tr",Be,t[14]||(t[14]=[(0,s.Lk)("td",{colspan:"7",class:"text-center text-muted"},"No branches found.",-1)]))):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:2},(0,s.pI)(i.branches,(e,a)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,o.v_)(a+1),1),(0,s.Lk)("td",null,(0,o.v_)(e.name),1),(0,s.Lk)("td",null,(0,o.v_)(e.contact_info||"—"),1),(0,s.Lk)("td",null,(0,o.v_)(e.department?.name||"—"),1),(0,s.Lk)("td",null,(0,o.v_)(e.opening_hour),1),(0,s.Lk)("td",null,(0,o.v_)(e.closing_hour),1),(0,s.Lk)("td",Fe,[t[17]||(t[17]=(0,s.Lk)("button",{class:"btn btn-sm btn-outline-primary me-1","data-bs-toggle":"modal","data-bs-target":"#sectionModal"},[(0,s.Lk)("i",{class:"bi bi-eye"})],-1)),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-warning me-1",onClick:t=>r.editBranch(e)},t[15]||(t[15]=[(0,s.Lk)("i",{class:"bi bi-pencil"},null,-1)]),8,Ae),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>r.deleteBranch(e)},t[16]||(t[16]=[(0,s.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,De)])]))),128))])]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[i.showModal?((0,s.uX)(),(0,s.CE)("div",Me,[(0,s.Lk)("div",Pe,[(0,s.Lk)("div",Xe,[(0,s.Lk)("h5",Ue,[(0,s.Lk)("i",{class:(0,o.C4)(["bi",i.isEditing?"bi-pencil":"bi-plus-circle"])},null,2),(0,s.eW)(" "+(0,o.v_)(i.isEditing?"Edit Branch":"Add New Branch"),1)]),(0,s.Lk)("button",{class:"btn-close",onClick:t[2]||(t[2]=(...e)=>r.cancelModal&&r.cancelModal(...e))})]),(0,s.Lk)("div",Se,[(0,s.Lk)("form",{onSubmit:t[9]||(t[9]=(0,n.D$)((...e)=>r.saveBranch&&r.saveBranch(...e),["prevent"]))},[(0,s.Lk)("div",Ne,[t[19]||(t[19]=(0,s.Lk)("label",{class:"form-label"},[(0,s.eW)("Name "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>i.form.name=e),required:""},null,512),[[n.Jo,i.form.name]])]),(0,s.Lk)("div",Te,[t[20]||(t[20]=(0,s.Lk)("label",{class:"form-label"},"Contact Info",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>i.form.contact_info=e),placeholder:"Email or phone number (optional)"},null,512),[[n.Jo,i.form.contact_info]])]),(0,s.Lk)("div",Ie,[t[21]||(t[21]=(0,s.Lk)("label",{class:"form-label"},"Department (optional)",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>i.form.department_id=e),placeholder:"Department ID or leave blank"},null,512),[[n.Jo,i.form.department_id]])]),(0,s.Lk)("div",We,[(0,s.Lk)("div",qe,[t[22]||(t[22]=(0,s.Lk)("label",{class:"form-label"},"Opening Hour",-1)),(0,s.bo)((0,s.Lk)("input",{type:"time",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>i.form.opening_hour=e),required:""},null,512),[[n.Jo,i.form.opening_hour]])]),(0,s.Lk)("div",Ve,[t[23]||(t[23]=(0,s.Lk)("label",{class:"form-label"},"Closing Hour",-1)),(0,s.bo)((0,s.Lk)("input",{type:"time",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>i.form.closing_hour=e),required:""},null,512),[[n.Jo,i.form.closing_hour]])])]),(0,s.Lk)("div",je,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[8]||(t[8]=(...e)=>r.cancelModal&&r.cancelModal(...e))},"Cancel"),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:!r.canSave},(0,o.v_)(i.isEditing?"Update":"Save"),9,Je)])],32)])])])):(0,s.Q3)("",!0)]))]),t[24]||(t[24]=(0,s.Lk)("div",{class:"modal fade",id:"sectionModal",tabindex:"-1",role:"dialog","aria-labelledby":"modalTitleId","aria-hidden":"true"},[(0,s.Lk)("div",{class:"modal-dialog",role:"document"},[(0,s.Lk)("div",{class:"modal-content"},[(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h5",{class:"modal-title",id:"modalTitleId"},"Models"),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),(0,s.Lk)("div",{class:"modal-body"},[(0,s.Lk)("div",{class:"container-fluid"},"Add rows here")]),(0,s.Lk)("div",{class:"modal-footer"},[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary"},"Save")])])])],-1))],64)}var Ye={props:{campus_id:{type:Number,required:!0}},data(){return{branches:[],fetching:!1,showModal:!1,isEditing:!1,form:{id:null,name:"",contact_info:"",department_id:null,opening_hour:"",closing_hour:""},originalForm:{}}},computed:{canSave(){return!!this.form.name&&(!this.isEditing||(this.form.name!==this.originalForm.name||this.form.contact_info!==this.originalForm.contact_info||this.form.department_id!==this.originalForm.department_id||this.form.opening_hour!==this.originalForm.opening_hour||this.form.closing_hour!==this.originalForm.closing_hour))}},methods:{async fetchBranches(){this.fetching=!0;try{const e=await(0,se.iq)(`branch/read/${this.campus_id}`);this.branches=e.data.data}catch(e){console.error(e),ge().fire("Error","Failed to fetch branches.","error")}finally{this.fetching=!1}},openAddForm(){this.resetForm(),this.isEditing=!1,this.showModal=!0},editBranch(e){this.form={...e},this.originalForm={...e},this.isEditing=!0,this.showModal=!0},async saveBranch(){if(!this.form.name)return;const e={...this.form,campus_id:this.campus_id};if((0,te.C)({message:"Saving branch, please wait..."}),this.isEditing){const a=await ge().fire({title:"Update Branch?",text:"Are you sure you want to update this branch information?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, update it",cancelButtonText:"Cancel"});if(!a.isConfirmed)return;try{(0,te.C)({message:"Upading information, please wait..."}),await(0,se.MB)("branch/update",e),this.fetchBranches(),ge().fire("Updated!","Branch information updated.","success")}catch(t){console.error(t),ge().fire("Error","Failed to update branch.","error")}}else try{await(0,se.MB)("branch/create",e),ge().fire("Added!","New branch has been added.","success"),this.fetchBranches()}catch(t){console.error(t),ge().fire("Error","Failed to add branch.","error")}this.showModal=!1},async deleteBranch(e){const t=await ge().fire({title:"Delete Branch?",text:`Are you sure you want to delete "${e.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"});if(t.isConfirmed)try{await(0,se.MB)("branch/delete",{id:e.id}),ge().fire("Deleted!","Branch removed successfully.","success"),this.fetchBranches()}catch(a){console.error(a),ge().fire("Error","Failed to delete branch.","error")}},cancelModal(){this.showModal=!1},resetForm(){this.form={id:null,name:"",contact_info:"",department_id:null,opening_hour:"",closing_hour:""},this.originalForm={...this.form}}},mounted(){this.fetchBranches()}};const Ke=(0,oe.A)(Ye,[["render",$e],["__scopeId","data-v-78fe882e"]]);var Oe=Ke;const Re={key:0,class:"card p-3 shadow-sm"},Qe={class:"d-flex justify-content-between align-items-center mb-3"},He={class:"hstack gap-2"},ze={class:"table table-bordered table-hover align-middle"},Ge={key:0},Ze={key:1},et={class:"text-danger"},tt={class:"text-center"},at=["onClick"],st=["onClick"],nt=["onClick"],ot={key:0,class:"custom-modal-backdrop"},lt={class:"custom-modal"},it={class:"modal-header justify-content-between"},rt={class:"mb-3"},ct={class:"modal-body"},dt={class:"mb-2"},mt={class:"mb-2"},ut={class:"d-flex justify-content-end gap-2"},pt=["disabled"],bt={key:1,class:"card p-3 shadow-sm"};function ht(e,t,a,l,i,r){const c=(0,s.g2)("ProgramPage");return i.selectedDepartment?((0,s.uX)(),(0,s.CE)("div",bt,[(0,s.bF)(c,{department:i.selectedDepartment,onBack:t[7]||(t[7]=e=>i.selectedDepartment=null)},null,8,["department"])])):((0,s.uX)(),(0,s.CE)("div",Re,[(0,s.Lk)("div",Qe,[t[10]||(t[10]=(0,s.Lk)("h5",{class:"m-0"},[(0,s.Lk)("i",{class:"bi bi-diagram-3 me-3"}),(0,s.eW)("Campus Departments")],-1)),(0,s.Lk)("div",He,[(0,s.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...e)=>r.openAddForm&&r.openAddForm(...e))},t[8]||(t[8]=[(0,s.Lk)("i",{class:"bi bi-plus-lg me-2"},null,-1),(0,s.eW)("Add Department")])),(0,s.Lk)("button",{class:"btn btn-outline-dark btn-sm",onClick:t[1]||(t[1]=(...e)=>r.fetchDepartment&&r.fetchDepartment(...e))},t[9]||(t[9]=[(0,s.Lk)("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),(0,s.eW)("Refresh")]))])]),(0,s.Lk)("table",ze,[t[16]||(t[16]=(0,s.Lk)("thead",{class:"table-light"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{style:{width:"10%"}},"No."),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Abbrev"),(0,s.Lk)("th",{class:"text-center"},"Actions")])],-1)),(0,s.Lk)("tbody",null,[i.fetching?((0,s.uX)(),(0,s.CE)("tr",Ge,t[11]||(t[11]=[(0,s.Lk)("td",{colspan:"7",class:"text-center text-muted"},"Loading...",-1)]))):i.departments&&0===i.departments.length?((0,s.uX)(),(0,s.CE)("tr",Ze,t[12]||(t[12]=[(0,s.Lk)("td",{colspan:"7",class:"text-center text-muted"},"No Department found.",-1)]))):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:2},(0,s.pI)(i.departments,(e,a)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,o.v_)(a+1),1),(0,s.Lk)("td",null,[(0,s.eW)((0,o.v_)(e.name)+" ",1),(0,s.Lk)("span",et,(0,o.v_)(e.deleted_at?" (Deleted)":""),1)]),(0,s.Lk)("td",null,(0,o.v_)(e.abbrev||"—"),1),(0,s.Lk)("td",tt,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-primary me-1",onClick:t=>i.selectedDepartment=e},t[13]||(t[13]=[(0,s.Lk)("i",{class:"bi bi-eye"},null,-1)]),8,at),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-warning me-1",onClick:t=>r.editDepartment({name:e.name,abbrev:e.abbrev,campus_id:e.campus_id,id:e.id})},t[14]||(t[14]=[(0,s.Lk)("i",{class:"bi bi-pencil"},null,-1)]),8,st),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>r.deleteDepartment(e)},t[15]||(t[15]=[(0,s.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,nt)])]))),128))])]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[i.showModal?((0,s.uX)(),(0,s.CE)("div",ot,[(0,s.Lk)("div",lt,[(0,s.Lk)("div",it,[(0,s.Lk)("h5",rt,[(0,s.Lk)("i",{class:(0,o.C4)(["bi",i.isEditing?"bi-pencil":"bi-plus-circle"])},null,2),(0,s.eW)(" "+(0,o.v_)(i.isEditing?"Edit Department":"Add New Department"),1)]),(0,s.Lk)("button",{class:"btn-close",onClick:t[2]||(t[2]=(...e)=>r.cancelModal&&r.cancelModal(...e))})]),(0,s.Lk)("div",ct,[(0,s.Lk)("form",{onSubmit:t[6]||(t[6]=(0,n.D$)((...e)=>r.saveDepartment&&r.saveDepartment(...e),["prevent"]))},[(0,s.Lk)("div",dt,[t[17]||(t[17]=(0,s.Lk)("label",{class:"form-label"},[(0,s.eW)("Name "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>i.form.name=e),required:""},null,512),[[n.Jo,i.form.name]])]),(0,s.Lk)("div",mt,[t[18]||(t[18]=(0,s.Lk)("label",{class:"form-label"},"Abbreviation",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>i.form.abbrev=e),placeholder:"CCSICT",required:""},null,512),[[n.Jo,i.form.abbrev]])]),(0,s.Lk)("div",ut,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>r.cancelModal&&r.cancelModal(...e))},"Cancel"),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:!r.canSave},(0,o.v_)(i.isEditing?"Update":"Save"),9,pt)])],32)])])])):(0,s.Q3)("",!0)]))]))}const kt={class:"d-flex justify-content-between align-items-center mb-3"},ft={class:"m-0"},gt={class:"hstack gap-2"},Lt={class:"table table-bordered table-hover align-middle"},vt={key:0},Ct={key:1},yt={class:"text-danger"},wt={class:"text-center"},_t=["onClick"],xt=["onClick"],Et={key:0,class:"custom-modal-backdrop"},Bt={class:"custom-modal"},Ft={class:"modal-header justify-content-between"},At={class:"mb-3"},Dt={class:"modal-body"},Mt={class:"mb-2"},Pt={class:"mb-2"},Xt={class:"d-flex justify-content-end gap-2"},Ut=["disabled"];function St(e,t,a,l,i,r){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",kt,[(0,s.Lk)("h5",ft,[(0,s.Lk)("button",{class:"btn btn-outline-secondary me-3",onClick:t[0]||(t[0]=t=>e.$emit("back",null))},t[8]||(t[8]=[(0,s.Lk)("i",{class:"bi bi-chevron-left"},null,-1)])),(0,s.eW)(" Programs Under "+(0,o.v_)(a.department.abbrev),1)]),(0,s.Lk)("div",gt,[(0,s.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t[1]||(t[1]=(...e)=>r.openAddForm&&r.openAddForm(...e))},t[9]||(t[9]=[(0,s.Lk)("i",{class:"bi bi-plus-lg me-2"},null,-1),(0,s.eW)("Add Program")])),(0,s.Lk)("button",{class:"btn btn-outline-dark btn-sm",onClick:t[2]||(t[2]=(...e)=>r.fetchPrograms&&r.fetchPrograms(...e))},t[10]||(t[10]=[(0,s.Lk)("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),(0,s.eW)("Refresh")]))])]),(0,s.Lk)("table",Lt,[t[15]||(t[15]=(0,s.Lk)("thead",{class:"table-light"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{style:{width:"10%"}},"No."),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Abbrev"),(0,s.Lk)("th",{class:"text-center"},"Actions")])],-1)),(0,s.Lk)("tbody",null,[i.fetching?((0,s.uX)(),(0,s.CE)("tr",vt,t[11]||(t[11]=[(0,s.Lk)("td",{colspan:"4",class:"text-center text-muted"},"Loading...",-1)]))):0===i.programs.length?((0,s.uX)(),(0,s.CE)("tr",Ct,t[12]||(t[12]=[(0,s.Lk)("td",{colspan:"4",class:"text-center text-muted"},"No programs found.",-1)]))):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:2},(0,s.pI)(i.programs,(e,a)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,o.v_)(a+1),1),(0,s.Lk)("td",null,[(0,s.eW)((0,o.v_)(e.name)+" ",1),(0,s.Lk)("span",yt,(0,o.v_)(e.deleted_at?" (Deleted)":""),1)]),(0,s.Lk)("td",null,(0,o.v_)(e.abbrev||"—"),1),(0,s.Lk)("td",wt,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-warning me-1",onClick:t=>r.editProgram(e)},t[13]||(t[13]=[(0,s.Lk)("i",{class:"bi bi-pencil"},null,-1)]),8,_t),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>r.deleteProgram(e)},t[14]||(t[14]=[(0,s.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,xt)])]))),128))])]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[i.showModal?((0,s.uX)(),(0,s.CE)("div",Et,[(0,s.Lk)("div",Bt,[(0,s.Lk)("div",Ft,[(0,s.Lk)("h5",At,[(0,s.Lk)("i",{class:(0,o.C4)(["bi",i.isEditing?"bi-pencil":"bi-plus-circle"])},null,2),(0,s.eW)(" "+(0,o.v_)(i.isEditing?"Edit Program":"Add New Program"),1)]),(0,s.Lk)("button",{class:"btn-close",onClick:t[3]||(t[3]=(...e)=>r.cancelModal&&r.cancelModal(...e))})]),(0,s.Lk)("div",Dt,[(0,s.Lk)("form",{onSubmit:t[7]||(t[7]=(0,n.D$)((...e)=>r.saveProgram&&r.saveProgram(...e),["prevent"]))},[(0,s.Lk)("div",Mt,[t[16]||(t[16]=(0,s.Lk)("label",{class:"form-label"},[(0,s.eW)("Program Name "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>i.form.name=e),required:""},null,512),[[n.Jo,i.form.name]])]),(0,s.Lk)("div",Pt,[t[17]||(t[17]=(0,s.Lk)("label",{class:"form-label"},"Abbreviation",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>i.form.abbrev=e),placeholder:"BSIT",required:""},null,512),[[n.Jo,i.form.abbrev]])]),(0,s.Lk)("div",Xt,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[6]||(t[6]=(...e)=>r.cancelModal&&r.cancelModal(...e))},"Cancel"),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:!r.canSave},(0,o.v_)(i.isEditing?"Update":"Save"),9,Ut)])],32)])])])):(0,s.Q3)("",!0)]))],64)}var Nt={props:{department:{type:Object,required:!0}},data(){return{programs:[],fetching:!1,showModal:!1,isEditing:!1,form:{id:null,name:"",abbrev:"",department_id:this.department.id},originalForm:{}}},computed:{canSave(){return!!this.form.name&&(!this.isEditing||(this.form.name!==this.originalForm.name||this.form.abbrev!==this.originalForm.abbrev))}},methods:{async fetchPrograms(){this.fetching=!0;try{const e=await(0,se.iq)(`program/read/${this.department.id}`);this.programs=e.data.data||[]}catch(e){console.error(e),ge().fire("Error","Failed to fetch programs.","error")}finally{this.fetching=!1}},openAddForm(){this.resetForm(),this.isEditing=!1,this.showModal=!0},editProgram(e){this.form={...e},this.originalForm={...e},this.isEditing=!0,this.showModal=!0},async saveProgram(){if(this.form.name){(0,te.C)({message:this.isEditing?"Updating program...":"Saving program..."});try{if(this.isEditing){const e=await ge().fire({title:"Update Program?",text:"Are you sure you want to update this program?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, update it",cancelButtonText:"Cancel"});if(!e.isConfirmed)return;await(0,se.zi)("program/update",this.form),ge().fire("Updated!","Program updated successfully.","success")}else await(0,se.MB)("program/create",this.form),ge().fire("Added!","Program created successfully.","success");this.fetchPrograms(),this.showModal=!1}catch(e){console.error(e),ge().fire("Error","Failed to save program.","error")}}},async deleteProgram(e){const t=await ge().fire({title:"Delete Program?",text:`Are you sure you want to delete "${e.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"});if(t.isConfirmed)try{await(0,se.Fb)(`program/delete/${e.id}`),ge().fire("Deleted!","Program deleted successfully.","success"),this.fetchPrograms()}catch(a){console.error(a),ge().fire("Error","Failed to delete program.","error")}},cancelModal(){this.showModal=!1},resetForm(){this.form={id:null,name:"",abbrev:"",department_id:this.department.id},this.originalForm={...this.form}}},mounted(){this.fetchPrograms()}};const Tt=(0,oe.A)(Nt,[["render",St],["__scopeId","data-v-7c3d71ed"]]);var It=Tt,Wt={props:{campus_id:{type:Number,required:!0}},components:{ProgramPage:It},data(){return{departments:[],fetching:!1,showModal:!1,isEditing:!1,form:{id:null,name:"",abbrev:"",campus_id:this.campus_id},originalForm:{},selectedDepartment:null}},computed:{canSave(){return!!this.form.name&&(!this.isEditing||(this.form.name!==this.originalForm.name||this.form.contact_info!==this.originalForm.contact_info||this.form.department_id!==this.originalForm.department_id||this.form.opening_hour!==this.originalForm.opening_hour||this.form.closing_hour!==this.originalForm.closing_hour))}},methods:{async fetchDepartment(){this.fetching=!0;try{const e=await(0,se.iq)(`department/read/${this.campus_id}`);this.departments=e.data.data,console.log(this.departments)}catch(e){console.error(e),ge().fire("Error","Failed to fetch Department.","error")}finally{this.fetching=!1}},openAddForm(){this.resetForm(),this.isEditing=!1,this.showModal=!0},editDepartment(e){this.form={...e},this.originalForm={...e},this.isEditing=!0,this.showModal=!0},async saveDepartment(){if(!this.form.name)return;const e={...this.form,campus_id:this.campus_id};if((0,te.C)({message:"Saving department, please wait..."}),this.isEditing){const a=await ge().fire({title:"Update Department?",text:"Are you sure you want to update this department information?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, update it",cancelButtonText:"Cancel"});if(!a.isConfirmed)return;try{(0,te.C)({message:"Upading information, please wait..."}),await(0,se.MB)("department/update",e),this.fetchDepartment(),ge().fire("Updated!","Department information updated.","success")}catch(t){console.error(t),ge().fire("Error","Failed to update department.","error")}}else try{await(0,se.MB)("department/create",e),ge().fire("Added!","New department has been added.","success"),this.fetchDepartment()}catch(t){console.error(t),ge().fire("Error","Failed to add department.","error")}this.showModal=!1},async deleteDepartment(e){const t=await ge().fire({title:"Delete Department?",text:`Are you sure you want to delete "${e.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"});if(t.isConfirmed)try{await(0,se.MB)("department/delete",{id:e.id}),ge().fire("Deleted!","Department removed successfully.","success"),this.fetchDepartment()}catch(a){console.error(a),ge().fire("Error","Failed to delete department.","error")}},cancelModal(){this.showModal=!1},resetForm(){this.form={id:null,name:"",contact_info:"",department_id:null,opening_hour:"",closing_hour:""},this.originalForm={...this.form}}},mounted(){this.fetchDepartment()}};const qt=(0,oe.A)(Wt,[["render",ht],["__scopeId","data-v-4839fc14"]]);var Vt=qt,jt={components:{AddNewCampus:ie,CampusEditor:Ce,CampusBranches:Oe,DepartmentPage:Vt},computed:{columnCount(){return this.columns.length}},mounted(){this.fetchCampuses()},data(){return{page:1,infoPage:1,debounceTimer:null,selectedCampus:{name:null},columns:[{label:"No.",style:"width: 75px"},{label:"Code"},{label:"Campus"},{label:"Address"},{label:"Action"}],params:{query:"",sort:"name",order:"asc",status:""},fetchingCampuses:!1,campuses:[]}},watch:{"params.query"(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.fetchCampuses()},500)}},methods:{isEmpty:Y,getLabel:K,refresh(){J.IG.campus=null,this.reset(),this.fetchCampuses()},reset(){this.query="",this.sort="",this.order="",this.status=""},addCampus(){const e=O.aF.getInstance(document.getElementById("addNewCampus"));e.hide(),this.refresh()},async fetchCampuses(){this.fetchingCampuses=!0;try{const e=await(0,J.Ye)(this.params);this.campuses=e.data}catch(e){this.fetchingCampuses=!1,console.log(e)}finally{this.fetchingCampuses=!1}},goToDetails(e){this.selectedCampus=e,this.page=2},goBack(){this.page=1,this.infoPage=1}}};const Jt=(0,oe.A)(jt,[["render",j],["__scopeId","data-v-08c56a98"]]);var $t=Jt}}]);
//# sourceMappingURL=8797.f30489b7.js.map