{"version":3,"file":"js/5744.baab814f.js","mappings":"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","sources":["webpack://frontend/./src/pages/admin/profile/ProfilePage.vue","webpack://frontend/./src/pages/admin/profile/ProfilePage.vue?b17d"],"sourcesContent":["<template>\r\n    <div class=\"d-flex h-100 overflow-hidden gap-3\">\r\n        <!-- ID Card -->\r\n        <div class=\"rounded shadow-sm bg-light d-flex align-items-start h-100 overflow-hidden w-50\" style=\"max-height: 100%; min-width: 400px\">\r\n            <div class=\"position-relative p-3 w-100\" style=\"height: 30%\">\r\n                <!-- ID Overlay -->\r\n                <div class=\"position-absolute w-100 h-50 start-0 top-0 bg-prime\" style=\"z-index: 0; aspect-ratio: 1/1\"></div>\r\n                <!-- Profile Picture -->\r\n                <div class=\"position-relative m-auto mt-2 mb-4 border border-5 bg-prime rounded-pill overflow-hidden p-1 w-75\" style=\"max-width: 180px; border-color: #0eb55c !important\" @mouseenter=\"hovered = true\" @mouseleave=\"hovered = false\">\r\n                    <img class=\"rounded-pill\" :src=\"preview\" style=\"width: 100%\" />\r\n\r\n                    <!-- Hidden file input -->\r\n                    <input ref=\"fileInput\" type=\"file\" @change=\"onfileChange\" style=\"display: none\" />\r\n\r\n                    <!-- Overlay prompt -->\r\n                    <div :style=\"hovered ? 'opacity: 1' : 'opacity: 0'\" @click=\"triggerFileInput\" class=\"position-absolute w-100 h-100 d-flex justify-content-center align-items-end top-0 start-0 text-white p-3\" style=\"z-index: 1; background: linear-gradient(to bottom, #00000026, black); cursor: pointer; transition: 0.3s ease\">\r\n                        <span class=\"mb-2\" style=\"font-size: 0.75rem\">\r\n                            {{ user?.profile_picture ? \"Change Profile\" : \"Upload Photo\" }}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <h4 class=\"fw-bold mb-1\">{{ user.name }}</h4>\r\n                <span class=\"small text-prime\">{{ roleMap(user.role) }}</span>\r\n\r\n                <hr />\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"w-75 bg-light rounded p-3 overflow-auto\" style=\"scrollbar-width: thin\">\r\n            <div class=\"h-auto w-100 d-flex flex-column\"></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport default_profile from \"@/assets/profile_default.png\";\r\nimport { user } from \"@/stores/auth\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            preview: null,\r\n            photo: null,\r\n            uploadedUrl: null,\r\n            user: user || null,\r\n            hovered: false,\r\n\r\n            roleMap: (role) => {\r\n                switch (role) {\r\n                    case \"0\":\r\n                        return \"Super Admin\";\r\n                    case \"1\":\r\n                        return \"Admin\";\r\n                    case \"2\":\r\n                        return \"Student\";\r\n\r\n                    default:\r\n                        return \"You shouldn't be here!\";\r\n                }\r\n            },\r\n        };\r\n    },\r\n    methods: {\r\n        triggerFileInput() {\r\n            this.$refs.fileInput?.click();\r\n        },\r\n        onfileChange(e) {\r\n            const file = e.target.files[0];\r\n            if (!file) return;\r\n\r\n            if (this.preview && this.preview.startsWith(\"blob:\")) {\r\n                URL.revokeObjectURL(this.preview);\r\n            }\r\n\r\n            this.photo = file;\r\n            this.preview = URL.createObjectURL(file);\r\n\r\n            this.upload();\r\n        },\r\n\r\n        async upload() {\r\n            if (!this.photo) return;\r\n\r\n            const formData = new FormData();\r\n            formData.append(\"photo\", this.photo);\r\n            formData.append(\"user_id\", this.user.id);\r\n            formData.append(\"role\", this.user.role);\r\n\r\n            try {\r\n                const res = await this.$api.post(\"/upload-pfp\", formData, {\r\n                    headers: {\r\n                        \"Content-Type\": \"multipart/form-data\",\r\n                    },\r\n                });\r\n\r\n                this.uploadedUrl = res.data.url;\r\n                this.user.profile_picture = this.uploadedUrl;\r\n                console.log(\"Upload success:\", this.uploadedUrl);\r\n            } catch (err) {\r\n                console.error(\"Upload failed:\", err);\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        if (this.user?.profile_picture) {\r\n            this.preview = this.user.profile_picture;\r\n        } else {\r\n            this.preview = default_profile;\r\n        }\r\n    },\r\n    beforeUnmount() {\r\n        if (this.preview && this.preview.startsWith(\"blob:\")) {\r\n            URL.revokeObjectURL(this.preview);\r\n        }\r\n    },\r\n};\r\n</script>\r\n\r\n","import { render } from \"./ProfilePage.vue?vue&type=template&id=442bcfed\"\nimport script from \"./ProfilePage.vue?vue&type=script&lang=js\"\nexport * from \"./ProfilePage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onMouseenter","_cache","$event","$data","hovered","onMouseleave","src","preview","ref","type","onChange","args","$options","onfileChange","_normalizeStyle","onClick","triggerFileInput","_hoisted_5","_toDisplayString","user","profile_picture","_hoisted_6","name","_hoisted_7","roleMap","role","data","photo","uploadedUrl","methods","this","$refs","fileInput","click","e","file","target","files","startsWith","URL","revokeObjectURL","createObjectURL","upload","formData","FormData","append","id","res","$api","post","headers","url","console","log","err","error","mounted","default_profile","beforeUnmount","__exports__","render"],"sourceRoot":""}