"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[5744],{1203:function(e,t,r){e.exports=r.p+"img/profile_default.2f6f1ea4.png"},5744:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var i=r(6768),o=r(4232);const s={class:"d-flex h-100 overflow-hidden gap-3"},l={class:"rounded shadow-sm bg-light d-flex align-items-start h-100 overflow-hidden w-50",style:{"max-height":"100%","min-width":"400px"}},n={class:"position-relative p-3 w-100",style:{height:"30%"}},a=["src"],p={class:"mb-2",style:{"font-size":"0.75rem"}},d={class:"fw-bold mb-1"},u={class:"small text-prime"};function h(e,t,r,h,c,f){return(0,i.uX)(),(0,i.CE)("div",s,[(0,i.Lk)("div",l,[(0,i.Lk)("div",n,[t[4]||(t[4]=(0,i.Lk)("div",{class:"position-absolute w-100 h-50 start-0 top-0 bg-prime",style:{"z-index":"0","aspect-ratio":"1/1"}},null,-1)),(0,i.Lk)("div",{class:"position-relative m-auto mt-2 mb-4 border border-5 bg-prime rounded-pill overflow-hidden p-1 w-75",style:{"max-width":"180px","border-color":"#0eb55c !important"},onMouseenter:t[2]||(t[2]=e=>c.hovered=!0),onMouseleave:t[3]||(t[3]=e=>c.hovered=!1)},[(0,i.Lk)("img",{class:"rounded-pill",src:c.preview,style:{width:"100%"}},null,8,a),(0,i.Lk)("input",{ref:"fileInput",type:"file",onChange:t[0]||(t[0]=(...e)=>f.onfileChange&&f.onfileChange(...e)),style:{display:"none"}},null,544),(0,i.Lk)("div",{style:(0,o.Tr)([c.hovered?"opacity: 1":"opacity: 0",{"z-index":"1",background:"linear-gradient(to bottom, #00000026, black)",cursor:"pointer",transition:"0.3s ease"}]),onClick:t[1]||(t[1]=(...e)=>f.triggerFileInput&&f.triggerFileInput(...e)),class:"position-absolute w-100 h-100 d-flex justify-content-center align-items-end top-0 start-0 text-white p-3"},[(0,i.Lk)("span",p,(0,o.v_)(c.user?.profile_picture?"Change Profile":"Upload Photo"),1)],4)],32),(0,i.Lk)("h4",d,(0,o.v_)(c.user.name),1),(0,i.Lk)("span",u,(0,o.v_)(c.roleMap(c.user.role)),1),t[5]||(t[5]=(0,i.Lk)("hr",null,null,-1))])]),t[6]||(t[6]=(0,i.Lk)("div",{class:"w-75 bg-light rounded p-3 overflow-auto",style:{"scrollbar-width":"thin"}},[(0,i.Lk)("div",{class:"h-auto w-100 d-flex flex-column"})],-1))])}r(4603),r(7566),r(8721);var c=r(1203),f=r(14),v={data(){return{preview:null,photo:null,uploadedUrl:null,user:f.kQ||null,hovered:!1,roleMap:e=>{switch(e){case"0":return"Super Admin";case"1":return"Admin";case"2":return"Student";default:return"You shouldn't be here!"}}}},methods:{triggerFileInput(){this.$refs.fileInput?.click()},onfileChange(e){const t=e.target.files[0];t&&(this.preview&&this.preview.startsWith("blob:")&&URL.revokeObjectURL(this.preview),this.photo=t,this.preview=URL.createObjectURL(t),this.upload())},async upload(){if(!this.photo)return;const e=new FormData;e.append("photo",this.photo),e.append("user_id",this.user.id),e.append("role",this.user.role);try{const t=await this.$api.post("/upload-pfp",e,{headers:{"Content-Type":"multipart/form-data"}});this.uploadedUrl=t.data.url,this.user.profile_picture=this.uploadedUrl,console.log("Upload success:",this.uploadedUrl)}catch(t){console.error("Upload failed:",t)}}},mounted(){this.user?.profile_picture?this.preview=this.user.profile_picture:this.preview=c},beforeUnmount(){this.preview&&this.preview.startsWith("blob:")&&URL.revokeObjectURL(this.preview)}},w=r(1241);const m=(0,w.A)(v,[["render",h]]);var b=m}}]);
//# sourceMappingURL=5744.baab814f.js.map