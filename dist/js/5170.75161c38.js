"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[5170],{2789:function(e,t,a){a.r(t),a.d(t,{default:function(){return $t}});var s=a(6768),l=a(5130),r=a(4232);const o={class:"hstack gap-3 h-100 align-items-center justify-content-start w-100"},n={class:"d-flex flex-column align-items-center justify-content-start text-dark overflow-auto h-100 w-100"},i={class:"card mb-2 w-100"},d={class:"card-body"},u={class:"hstack justify-content-between"},c={class:"hstack gap-2 justify-content-end"},m={class:"btn-group"},p={class:"dropdown-menu dropdown-menu-end",id:"filterBtn",style:{width:"300px"}},k={class:"container p-3"},b={class:"mb-3"},L={class:"mb-3"},h=["value"],f={class:"mb-3"},g={class:"hstack justify-content-end gap-2 mt-2"},v={class:"btn-group"},y={class:"dropdown-menu dropdown-menu-end",id:"sortBtn",style:{width:"300px"}},_={class:"container p-3"},w={class:"mb-3"},C={class:"mb-3"},x={class:"hstack justify-content-end gap-2 mt-2"},U={class:"hstack gap-2 w-50"},E={class:"card w-100 h-100 overflow-auto"},A={class:"card-header hstack justify-content-between"},X={class:"card-body overflow-auto p-0"},I={class:""},F={class:"card-footer d-flex flex-wrap justify-content-between align-items-center gap-3"},S={class:"d-flex align-items-center gap-2"},D={class:"d-flex align-items-center gap-2 flex-wrap"},P=["value"],q={class:"text-muted",style:{"white-space":"nowrap"}},W={key:0,class:"card h-100",style:{"min-width":"400px","max-width":"400px"}},V={class:"modal fade",id:"addNewUser","data-bs-backdrop":"static"};function B(e,t,a,B,$,N){const M=(0,s.g2)("SearchInput"),j=(0,s.g2)("ListPage"),Q=(0,s.g2)("UserInformationPage"),T=(0,s.g2)("AddNewUserPage");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",o,[(0,s.Lk)("div",n,[(0,s.Lk)("div",i,[t[27]||(t[27]=(0,s.Lk)("div",{class:"card-header"},"Data Management",-1)),(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[(0,s.Lk)("div",c,[(0,s.Lk)("div",m,[t[19]||(t[19]=(0,s.Lk)("button",{type:"button",class:"btn btn-secondary dropdown-toggle","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[(0,s.Lk)("i",{class:"bi bi-funnel me-2"}),(0,s.Lk)("span",{class:"me-2"},"Filter")],-1)),(0,s.Lk)("ul",p,[(0,s.Lk)("div",k,[t[18]||(t[18]=(0,s.Lk)("h6",{class:"fw-bold mb-3"},"Filter Option",-1)),(0,s.Lk)("div",b,[t[13]||(t[13]=(0,s.Lk)("label",{for:"role",class:"form-label"},"Role",-1)),(0,s.bo)((0,s.Lk)("select",{name:"role",id:"role",class:"form-select mb-2","onUpdate:modelValue":t[0]||(t[0]=e=>$.params.role=e)},t[12]||(t[12]=[(0,s.Lk)("option",{value:""},"All",-1),(0,s.Lk)("option",{value:"0"},"Admin",-1),(0,s.Lk)("option",{value:"1"},"Librarian",-1),(0,s.Lk)("option",{value:"2"},"Patron",-1)]),512),[[l.u1,$.params.role]])]),(0,s.Lk)("div",L,[t[15]||(t[15]=(0,s.Lk)("label",{for:"campus",class:"form-label"},"Campus",-1)),(0,s.bo)((0,s.Lk)("select",{name:"campus",id:"campus",class:"form-select mb-2","onUpdate:modelValue":t[1]||(t[1]=e=>$.params.campus=e)},[t[14]||(t[14]=(0,s.Lk)("option",{value:""},"All",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)($.campuses,e=>((0,s.uX)(),(0,s.CE)("option",{value:e.id,key:e.id},(0,r.v_)(e.name),9,h))),128))],512),[[l.u1,$.params.campus]])]),(0,s.Lk)("div",f,[t[17]||(t[17]=(0,s.Lk)("label",{for:"status",class:"form-label"},"Account Status",-1)),(0,s.bo)((0,s.Lk)("select",{name:"status",id:"status",class:"form-select mb-2","onUpdate:modelValue":t[2]||(t[2]=e=>$.params.status=e)},t[16]||(t[16]=[(0,s.Lk)("option",{value:""},"All",-1),(0,s.Lk)("option",{value:"0"},"Active",-1),(0,s.Lk)("option",{value:"1"},"For Approval",-1),(0,s.Lk)("option",{value:"2"},"Inactive",-1)]),512),[[l.u1,$.params.status]])]),(0,s.Lk)("div",g,[(0,s.Lk)("button",{class:"btn btn-success","data-bs-dismiss":"dropdown",onClick:t[3]||(t[3]=(...e)=>N.applyFilter&&N.applyFilter(...e))},"Apply")])])])]),(0,s.Lk)("div",v,[t[25]||(t[25]=(0,s.Lk)("button",{type:"button",class:"btn btn-secondary dropdown-toggle","data-bs-toggle":"dropdown","data-bs-auto-close":"outside","aria-expanded":"false"},[(0,s.Lk)("i",{class:"bi bi-filter me-2"}),(0,s.Lk)("span",{class:"me-2"},"Sort")],-1)),(0,s.Lk)("ul",y,[(0,s.Lk)("div",_,[t[24]||(t[24]=(0,s.Lk)("h6",{class:"fw-bold mb-3"},"Sort Option",-1)),(0,s.Lk)("div",w,[t[21]||(t[21]=(0,s.Lk)("label",{for:"sort",class:"form-label"},"Sort By",-1)),(0,s.bo)((0,s.Lk)("select",{name:"sort",id:"sort",class:"form-select mb-2","onUpdate:modelValue":t[4]||(t[4]=e=>$.params.sort=e)},t[20]||(t[20]=[(0,s.Lk)("option",{value:"last_name"},"Name",-1),(0,s.Lk)("option",{value:"status"},"Status",-1),(0,s.Lk)("option",{value:"created_at"},"Date Created",-1)]),512),[[l.u1,$.params.sort]])]),(0,s.Lk)("div",C,[t[23]||(t[23]=(0,s.Lk)("label",{for:"order",class:"form-label"},"Order By",-1)),(0,s.bo)((0,s.Lk)("select",{name:"order",id:"order",class:"form-select mb-2","onUpdate:modelValue":t[5]||(t[5]=e=>$.params.order=e)},t[22]||(t[22]=[(0,s.Lk)("option",{value:"asc"},"Ascending",-1),(0,s.Lk)("option",{value:"desc"},"Descending",-1)]),512),[[l.u1,$.params.order]])]),(0,s.Lk)("div",x,[(0,s.Lk)("button",{class:"btn btn-success","data-bs-dismiss":"dropdown",onClick:t[6]||(t[6]=(...e)=>N.applySort&&N.applySort(...e))},"Apply")])])])])]),(0,s.Lk)("div",U,[(0,s.bF)(M,{query:$.params.query,"onUpdate:query":t[7]||(t[7]=e=>$.params.query=e)},null,8,["query"]),t[26]||(t[26]=(0,s.Lk)("button",{class:"btn btn-outline-primary","data-bs-toggle":"modal","data-bs-target":"#addNewUser"},[(0,s.Lk)("i",{class:"bi bi-person-add me-2"}),(0,s.eW)("Add User")],-1))])])])]),(0,s.Lk)("div",E,[(0,s.Lk)("div",A,[t[29]||(t[29]=(0,s.Lk)("h5",{class:"m-0"},[(0,s.Lk)("i",{class:"bi bi-person-circle ms-2 me-3"}),(0,s.eW)("All Users")],-1)),(0,s.Lk)("button",{class:"btn btn-outline-dark",onClick:t[8]||(t[8]=(...e)=>N.refresh&&N.refresh(...e))},t[28]||(t[28]=[(0,s.Lk)("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),(0,s.eW)("Refresh")]))]),(0,s.Lk)("div",X,[(0,s.Lk)("div",I,[(0,s.bF)(j,{users:$.users,fetching:$.fetchingUsers,onSelectedId:N.selectedUserId,"onSelected:user":t[9]||(t[9]=e=>$.selectedUser=e)},null,8,["users","fetching","onSelectedId"])])]),(0,s.Lk)("div",F,[(0,s.Lk)("div",S,[t[31]||(t[31]=(0,s.Lk)("label",{for:"entries",class:"form-label mb-0"},"Show",-1)),(0,s.bo)((0,s.Lk)("select",{name:"entries",id:"entries",class:"form-select form-select-sm",style:{width:"auto"},"onUpdate:modelValue":t[10]||(t[10]=e=>$.params.entries=e)},t[30]||(t[30]=[(0,s.Lk)("option",{value:"25"},"25",-1),(0,s.Lk)("option",{value:"50"},"50",-1),(0,s.Lk)("option",{value:"100"},"100",-1),(0,s.Lk)("option",{value:"250"},"250",-1)]),512),[[l.u1,$.params.entries]]),t[32]||(t[32]=(0,s.Lk)("span",{class:"text-muted"},"entries",-1))]),(0,s.Lk)("div",D,[t[33]||(t[33]=(0,s.Lk)("label",{for:"page",class:"form-label mb-0"},"Showing page",-1)),(0,s.bo)((0,s.Lk)("select",{name:"page",id:"page",class:"form-select form-select-sm",style:{width:"auto"},"onUpdate:modelValue":t[11]||(t[11]=e=>$.params.page=e)},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)($.pagination.last_page,e=>((0,s.uX)(),(0,s.CE)("option",{value:e,key:e},(0,r.v_)(e),9,P))),128))],512),[[l.u1,$.params.page]]),(0,s.Lk)("span",q," of "+(0,r.v_)($.pagination.last_page||1)+" ("+(0,r.v_)($.pagination.total||0)+" users total) ",1)])])])]),$.showDetails?((0,s.uX)(),(0,s.CE)("div",W,[$.selectedId?((0,s.uX)(),(0,s.Wv)(Q,{key:0,id:$.selectedId,data:$.selectedUser,onUpdatePage:N.updatePage,"onPage:changes":N.refresh},null,8,["id","data","onUpdatePage","onPage:changes"])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",V,[(0,s.bF)(T,{onAdded:N.refresh},null,8,["onAdded"])])],64)}var $=a(223),N=a(8077);const M={class:"position-relative overflow-hidden w-100"};function j(e,t,a,o,n,i){return(0,s.uX)(),(0,s.CE)("div",M,[""!==a.query||null!==a.query?((0,s.uX)(),(0,s.CE)("i",{key:0,class:"bi bi-search position-absolute mt-2 start-0",style:(0,r.Tr)({marginLeft:n.searchFocused?"0.75rem":"-2rem"})},null,4)):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("input",{id:"query",name:"query",type:"search",class:"form-control search",placeholder:"Search user...",style:(0,r.Tr)({paddingLeft:n.searchFocused?"2.5rem":"0.75rem"}),"onUpdate:modelValue":t[0]||(t[0]=e=>n.internalQuery=e),onFocus:t[1]||(t[1]=e=>n.searchFocused=!1),onBlur:t[2]||(t[2]=e=>n.searchFocused=!0)},null,36),[[l.Jo,n.internalQuery]])])}var Q={props:{query:String},emits:["update:query"],data(){return{searchFocused:!0,internalQuery:this.query}},watch:{internalQuery(e){this.$emit("update:query",e)},query(e){this.internalQuery=e}}},T=a(1241);const K=(0,T.A)(Q,[["render",j]]);var R=K;const z={class:"card-header hstack justify-content-between p-1"},J={class:"hstack gap-1"},Y={class:"m-0"},G={class:"hstack gap-2"},O={class:"btn-group dropstart"},H={class:"dropdown-menu"},Z={class:"card-body pt-1 overflow-auto"},ee={class:"row gap-4"},te={class:"col-12 position-relative"},ae=["src"],se={key:0,class:"position-absolute bottom-0 end-0 me-2 badge bg-info rounded-circle p-1",title:"Verified"},le={class:"hstack justify-content-between mt-2"},re={class:"fw-bold mb-1"},oe={key:0,class:"badge bg-info"},ne={key:1,class:"badge bg-danger"},ie={key:2,class:"badge bg-success"},de={key:3,class:"badge bg-warning text-dark"},ue={key:4,class:"badge bg-secondary"},ce={key:0,class:"text-muted mb-1"},me={key:1,class:"text-muted mb-1"},pe={class:"badge bg-white text-dark me-2 border",style:{"border-radius":"3px"}},ke={key:2,class:"hstack justify-content-between mt-4"},be={class:"hstack gap-2"},Le={class:"col-12"},he={class:"table table-responsive table-hover"},fe={class:"col-12"},ge={class:"table table-responsive table-hover"},ve={class:"text-lowercase"},ye={key:0},_e={style:{"text-transform":"none"}},we={key:0,class:"col-12"},Ce={class:"table table-responsive table-hover"},xe={key:0},Ue={key:1},Ee={key:1,class:"col-12"},Ae={class:"table table-responsive table-hover"},Xe={key:0},Ie={key:1},Fe={class:"col-12"},Se={class:"table table-responsive table-hover"};function De(e,t,a,l,o,n){return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",z,[(0,s.Lk)("div",J,[(0,s.Lk)("button",{class:"btn",onClick:t[0]||(t[0]=(...t)=>e.updatePage&&e.updatePage(...t))},t[4]||(t[4]=[(0,s.Lk)("i",{class:"bi bi-chevron-left"},null,-1)])),(0,s.Lk)("p",Y,(0,r.v_)(o.user?.first_name||"User")+"'s Information",1)]),(0,s.Lk)("div",G,[(0,s.Lk)("div",O,[t[9]||(t[9]=(0,s.Lk)("button",{class:"btn","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,s.Lk)("i",{class:"bi bi-three-dots-vertical"})],-1)),(0,s.Lk)("ul",H,[t[7]||(t[7]=(0,s.Lk)("li",null,[(0,s.Lk)("a",{class:"dropdown-item",href:"#"},"Edit User")],-1)),t[8]||(t[8]=(0,s.Lk)("li",null,[(0,s.Lk)("a",{class:"dropdown-item",href:"#"},"Deactivate User")],-1)),o.user.deleted_at?((0,s.uX)(),(0,s.CE)("li",{key:0,onClick:t[1]||(t[1]=(...e)=>n.restoreUser&&n.restoreUser(...e))},t[5]||(t[5]=[(0,s.Lk)("a",{class:"dropdown-item",href:"#"},[(0,s.Lk)("i",{class:"bi bi-arrow-clockwise me-2"}),(0,s.eW)("Retrieve User")],-1)]))):((0,s.uX)(),(0,s.CE)("li",{key:1,onClick:t[2]||(t[2]=(...e)=>n.deleteUser&&n.deleteUser(...e))},t[6]||(t[6]=[(0,s.Lk)("a",{class:"dropdown-item",href:"#"},[(0,s.Lk)("i",{class:"bi bi-trash me-2"}),(0,s.eW)("Delete User")],-1)])))])])])]),(0,s.Lk)("div",Z,[(0,s.Lk)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("div",{class:(0,r.C4)(["position-absolute top-0 start-0 w-100 rounded-top",[o.user.deleted_at?"bg-danger":0==o.user.role?"bg-dark":1==o.user.role?"bg-info":"bg-prime"]]),style:{height:"7rem"}},null,2),(0,s.Lk)("div",{class:(0,r.C4)(["d-flex align-items-center mb-3 shadow-sm rounded-circle border position-relative",[1==o.user.pending_registration_approval?"border-info":"border-success"]]),style:{width:"100px",height:"100px","z-index":"2","margin-top":"3rem",background:"white"}},[(0,s.Lk)("img",{src:o.user.profile_picture,class:"rounded-circle",style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,ae),o.user.email_verified_at?((0,s.uX)(),(0,s.CE)("span",se,t[10]||(t[10]=[(0,s.Lk)("i",{class:"bi bi-check fw-bold fs-5"},null,-1)]))):(0,s.Q3)("",!0)],2),(0,s.Lk)("div",le,[(0,s.Lk)("h4",re,(0,r.v_)(o.user.name),1),1==o.user.pending_registration_approval?((0,s.uX)(),(0,s.CE)("span",oe,"For Approval")):o.user.deleted_at?((0,s.uX)(),(0,s.CE)("span",ne,"Deleted")):0==o.user.status?((0,s.uX)(),(0,s.CE)("span",ie,"Active")):1==o.user.status?((0,s.uX)(),(0,s.CE)("span",de,"Suspended")):((0,s.uX)(),(0,s.CE)("span",ue,"Expired"))]),1==o.user.role?((0,s.uX)(),(0,s.CE)("p",ce,(0,r.v_)("@"+o.user.librarian.username+" | "+o.user.email),1)):((0,s.uX)(),(0,s.CE)("p",me,(0,r.v_)(o.user.email),1)),(0,s.Lk)("span",pe,(0,r.v_)(o.user.roleText),1),"1"===o.user.pending_registration_approval?((0,s.uX)(),(0,s.CE)("div",ke,[t[13]||(t[13]=(0,s.Lk)("p",{class:"mb-0"},"Approve user registration?",-1)),(0,s.Lk)("div",be,[t[12]||(t[12]=(0,s.Lk)("button",{class:"btn btn-sm btn-outline-danger pe-3"},[(0,s.Lk)("i",{class:"bi bi-x me-1"}),(0,s.eW)("Reject")],-1)),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-success pe-3",onClick:t[3]||(t[3]=(...e)=>n.approve&&n.approve(...e))},t[11]||(t[11]=[(0,s.Lk)("i",{class:"bi bi-check me-1"},null,-1),(0,s.eW)("Approve")]))])])):(0,s.Q3)("",!0),t[14]||(t[14]=(0,s.Lk)("hr",null,null,-1))]),(0,s.Lk)("div",Le,[t[20]||(t[20]=(0,s.Lk)("h6",{class:"fw-bold mb-3 text-primary"},[(0,s.Lk)("i",{class:"bi bi-person-circle me-2"}),(0,s.eW)("Personal Information")],-1)),(0,s.Lk)("table",he,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[t[15]||(t[15]=(0,s.Lk)("th",null,"First Name",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.first_name),1)]),(0,s.Lk)("tr",null,[t[16]||(t[16]=(0,s.Lk)("th",null,"Middle Initial",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.middle_initial||"N/A"),1)]),(0,s.Lk)("tr",null,[t[17]||(t[17]=(0,s.Lk)("th",null,"Last Name",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.last_name),1)]),(0,s.Lk)("tr",null,[t[18]||(t[18]=(0,s.Lk)("th",null,"Sex",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.sex),1)]),(0,s.Lk)("tr",null,[t[19]||(t[19]=(0,s.Lk)("th",null,"Role",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.roleText),1)])])])]),(0,s.Lk)("div",fe,[t[25]||(t[25]=(0,s.Lk)("h6",{class:"fw-bold mb-3 text-primary"},[(0,s.Lk)("i",{class:"bi bi-person-vcard-fill me-2"}),(0,s.eW)("Account & Contact Information")],-1)),(0,s.Lk)("table",ge,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[t[21]||(t[21]=(0,s.Lk)("th",null,"Email",-1)),(0,s.Lk)("td",ve,(0,r.v_)(o.user.email),1)]),o.user.librarian?((0,s.uX)(),(0,s.CE)("tr",ye,[t[22]||(t[22]=(0,s.Lk)("th",null,"Username",-1)),(0,s.Lk)("td",_e,(0,r.v_)(o.user.librarian.username),1)])):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,[t[23]||(t[23]=(0,s.Lk)("th",null,"Contact Number",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.contact_number||"-"),1)]),(0,s.Lk)("tr",null,[t[24]||(t[24]=(0,s.Lk)("th",null,"Login Attempts",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.login_attempt),1)])])])]),o.user.librarian?((0,s.uX)(),(0,s.CE)("div",we,[t[30]||(t[30]=(0,s.Lk)("h6",{class:"fw-bold mb-3 text-primary"},[(0,s.Lk)("i",{class:"bi bi-building me-2"}),(0,s.eW)("Library Information")],-1)),(0,s.Lk)("table",Ce,[o.user?.librarian?.section?((0,s.uX)(),(0,s.CE)("tbody",xe,[(0,s.Lk)("tr",null,[t[26]||(t[26]=(0,s.Lk)("th",null,"Campus",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.librarian.branch?.campus?.name+" ("+o.user.librarian.branch?.campus?.abbrev+")"),1)]),(0,s.Lk)("tr",null,[t[27]||(t[27]=(0,s.Lk)("th",null,"Branch",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.librarian.branch?.name),1)]),(0,s.Lk)("tr",null,[t[28]||(t[28]=(0,s.Lk)("th",null,"Member since",-1)),(0,s.Lk)("td",null,(0,r.v_)(n.formatShortDate(o.user.librarian.branch?.created_at)),1)])])):((0,s.uX)(),(0,s.CE)("tbody",Ue,t[29]||(t[29]=[(0,s.Lk)("tr",null,[(0,s.Lk)("td",{colspan:"2",style:{"text-transform":"none"}},"This librarian hasn't been assigned to any libraries yet.")],-1)])))])])):(0,s.Q3)("",!0),o.user.patron?((0,s.uX)(),(0,s.CE)("div",Ee,[t[37]||(t[37]=(0,s.Lk)("h6",{class:"fw-bold mb-3 text-primary"},[(0,s.Lk)("i",{class:"bi bi-person-workspace me-2"}),(0,s.eW)("Patron Information")],-1)),(0,s.Lk)("table",Ae,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[t[31]||(t[31]=(0,s.Lk)("th",null,"ID Number",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.patron.id_number||"-"),1)]),(0,s.Lk)("tr",null,[t[32]||(t[32]=(0,s.Lk)("th",null,"EBC",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.patron.ebc||"-"),1)])]),3==o.user.patron.patron_type_id?((0,s.uX)(),(0,s.CE)("tbody",Xe,[(0,s.Lk)("tr",null,[t[33]||(t[33]=(0,s.Lk)("th",null,"Organization/Campus",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.patron.external_organization),1)])])):((0,s.uX)(),(0,s.CE)("tbody",Ie,[(0,s.Lk)("tr",null,[t[34]||(t[34]=(0,s.Lk)("th",null,"Campus",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.patron?.program.department.campus?.name+" ("+o.user.patron?.program.department.campus?.abbrev+")"),1)]),(0,s.Lk)("tr",null,[t[35]||(t[35]=(0,s.Lk)("th",null,"Department",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.patron.program.department.abbrev+" - "+o.user.patron.program.department.name),1)]),(0,s.Lk)("tr",null,[t[36]||(t[36]=(0,s.Lk)("th",null,"Program",-1)),(0,s.Lk)("td",null,(0,r.v_)(o.user.patron.program.abbrev+" - "+o.user.patron.program.name),1)])]))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Fe,[t[43]||(t[43]=(0,s.Lk)("h6",{class:"fw-bold mb-3 text-primary"},[(0,s.Lk)("i",{class:"bi bi-exclamation-circle me-2"}),(0,s.eW)("Account Status")],-1)),(0,s.Lk)("table",Se,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[t[38]||(t[38]=(0,s.Lk)("th",null,"Status",-1)),(0,s.Lk)("td",null,(0,r.v_)(0==o.user.status?"Active":1==o.user.status?"Suspended":2==o.user.status?"Expired":"Invalid"),1)]),(0,s.Lk)("tr",null,[t[39]||(t[39]=(0,s.Lk)("th",null,"Registration Approval Status",-1)),(0,s.Lk)("td",null,(0,r.v_)(0==o.user.pending_registration_approval?"Approved":1==o.user.pending_registration_approval?"Pending":2==o.user.pending_registration_approval?"Rejected":"Invalid"),1)]),(0,s.Lk)("tr",null,[t[40]||(t[40]=(0,s.Lk)("th",null,"Created",-1)),(0,s.Lk)("td",null,(0,r.v_)(n.formatDate(o.user.created_at)||"-"),1)]),(0,s.Lk)("tr",null,[t[41]||(t[41]=(0,s.Lk)("th",null,"Last Modified",-1)),(0,s.Lk)("td",null,(0,r.v_)(n.formatDate(o.user.updated_at)||"-"),1)]),(0,s.Lk)("tr",null,[t[42]||(t[42]=(0,s.Lk)("th",null,"Deleted At",-1)),(0,s.Lk)("td",null,(0,r.v_)(n.formatDate(o.user.deleted_at)||"-"),1)])])])])])])],64)}var Pe=a(1661),qe=a(445),We=a(3973),Ve=a(4564),Be=a(5719),$e={props:{data:Object},data(){return{user:{},fetching:!1,profile_picture:this.defaultAvatar}},watch:{data:{immediate:!0,handler(e){this.user={...e}}}},methods:{formatDate:Be.Yq,formatShortDate:Be.sL,async approve(){const e=await(0,We.l)({title:"Approve User",message:`Are you sure you want to approve ${this.user.first_name}'s registration? `});if(e){(0,Pe.C)({message:"Approving, please wait..."});try{const e=await(0,Ve.iq)("a/user/approve/"+this.user.id);this.user.pending_registration_approval="0",(0,qe.w)({status:"success",title:"Approved",message:e.data.message}),this.$emit("page:changes")}catch(t){(0,qe.w)({status:"error",title:"Error",message:"Failed to approve user."+t.message})}}},async restoreUser(){const e=await(0,We.l)({title:"Delete User",message:`Are you sure you want to restore ${this.data.first_name}'s account?`});if(e){(0,Pe.C)({message:"Restoring"});try{const e=await(0,Ve.zi)("a/user/restore/"+this.user.id);(0,qe.w)({status:"success",title:"Restored",message:e.data.message})}catch(t){(0,qe.w)({status:"error",title:"Error",message:"Failed to restore user."+t.message})}}this.$emit("page:changes",null)},async deleteUser(){let e=null;if(e=this.data.deleted_at?await(0,We.l)({title:"Permanently Delete User",message:`Are you sure you want to permanently delete ${this.data.first_name}'s account?`}):await(0,We.l)({title:"Delete User",message:`Are you sure you want to delete ${this.data.first_name}'s account?`}),e){(0,Pe.C)({message:"Deleting"});try{const e=await(0,Ve.Fb)("a/user/delete/"+this.user.id);this.user.pending_registration_approval="0",(0,qe.w)({status:"success",title:"Deleted",message:e.data.message})}catch(t){(0,qe.w)({status:"error",title:"Error",message:"Failed to delete user."+t.message})}}this.$emit("page:changes",null)}},mounted(){console.log(this.data),this.user=this.data}};const Ne=(0,T.A)($e,[["render",De],["__scopeId","data-v-3b3c2ed1"]]);var Me=Ne;const je={class:"modal-dialog modal-dialog-centered modal-lg"},Qe={class:"modal-content border-0 shadow-lg rounded-4 futuristic-card"},Te={class:"modal-header border-0"},Ke={class:"modal-body"},Re={class:"row g-3"},ze={class:"col-md-4"},Je={class:"col-md-4"},Ye={class:"col-md-4"},Ge={class:"col-md-4"},Oe={class:"col-md-4"},He={class:"col-md-4"},Ze={class:"col-md-4"},et={class:"hstack gap-2"},tt={class:"col-md-4"},at={class:"col-md-4"},st=["value"],lt={class:"col-md-4"},rt={key:0,value:"",disabled:"",selected:""},ot={key:1,value:"",disabled:"",selected:""},nt=["value"],it={class:"col-md-4"},dt=["value"],ut={class:"col-md-4"},ct=["value"],mt={class:"col-md-4"},pt=["value"],kt={class:"col-md-4"},bt=["value"],Lt={class:"col-md-4"},ht={key:1,class:"col-md-6"},ft={class:"mt-4 hstack gap-2 justify-content-end"};function gt(e,t,a,o,n,i){return(0,s.uX)(),(0,s.CE)("div",je,[(0,s.Lk)("div",Qe,[(0,s.Lk)("div",Te,[t[24]||(t[24]=(0,s.Lk)("h5",{class:"modal-title d-flex align-items-center"},[(0,s.Lk)("i",{class:"bi bi-person-add me-2"}),(0,s.eW)(" Add New User ")],-1)),(0,s.Lk)("button",{type:"button",class:"btn-close btn-close-white",onClick:t[0]||(t[0]=e=>i.closeModal(e)),"aria-label":"Close"})]),(0,s.Lk)("div",Ke,[(0,s.Lk)("form",{onSubmit:t[23]||(t[23]=(0,l.D$)((...e)=>i.submitForm&&i.submitForm(...e),["prevent"]))},[(0,s.Lk)("div",Re,[(0,s.Lk)("div",ze,[t[25]||(t[25]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Last Name "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>n.form.last_name=e),required:""},null,512),[[l.Jo,n.form.last_name,void 0,{trim:!0}]])]),(0,s.Lk)("div",Je,[t[26]||(t[26]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("First Name "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.form.first_name=e),required:""},null,512),[[l.Jo,n.form.first_name,void 0,{trim:!0}]])]),(0,s.Lk)("div",Ye,[t[27]||(t[27]=(0,s.Lk)("label",{class:"form-label fw-semibold"},"Middle Initial",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control",maxlength:"1","onUpdate:modelValue":t[3]||(t[3]=e=>n.form.middle_initial=e)},null,512),[[l.Jo,n.form.middle_initial,void 0,{trim:!0}]])]),(0,s.Lk)("div",Ge,[t[29]||(t[29]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Sex "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select neon-select","onUpdate:modelValue":t[4]||(t[4]=e=>n.form.sex=e),required:""},t[28]||(t[28]=[(0,s.Lk)("option",{value:""},"Select",-1),(0,s.Lk)("option",{value:"male"},"Male",-1),(0,s.Lk)("option",{value:"female"},"Female",-1)]),512),[[l.u1,n.form.sex]])]),(0,s.Lk)("div",Oe,[t[30]||(t[30]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Birthdate "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"date",name:"birtdate",id:"birthdate",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>n.form.birthdate=e),required:""},null,512),[[l.Jo,n.form.birthdate]])]),(0,s.Lk)("div",He,[t[32]||(t[32]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Role "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select neon-select","onUpdate:modelValue":t[6]||(t[6]=e=>n.form.role=e),required:""},t[31]||(t[31]=[(0,s.Lk)("option",{value:"",disabled:""},"Select Role",-1),(0,s.Lk)("option",{value:"0"},"Admin",-1),(0,s.Lk)("option",{value:"1"},"Librarian",-1),(0,s.Lk)("option",{value:"2"},"Patron",-1)]),512),[[l.u1,n.form.role]])]),(0,s.Lk)("div",Ze,[t[34]||(t[34]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Email "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>n.form.email=e),required:""},null,512),[[l.Jo,n.form.email,void 0,{trim:!0}]]),(0,s.Lk)("div",et,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",name:"autoEmail",id:"autoEmail",class:"form-check","onUpdate:modelValue":t[8]||(t[8]=e=>n.autoEmail=e)},null,512),[[l.lH,n.autoEmail]]),t[33]||(t[33]=(0,s.Lk)("label",{class:"form-label fw-semibold"},"Use ISU email?",-1))])]),1==n.form.role?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",tt,[t[35]||(t[35]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Username "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>n.form.username=e),required:""},null,512),[[l.Jo,n.form.username,void 0,{trim:!0}]])]),(0,s.Lk)("div",at,[t[37]||(t[37]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Campus "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select neon-select","onUpdate:modelValue":t[10]||(t[10]=e=>n.form.campus_id=e),onChange:t[11]||(t[11]=(...e)=>i.filterBranches&&i.filterBranches(...e)),required:""},[t[36]||(t[36]=(0,s.Lk)("option",{value:""},"Select Campus",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.campuses,e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,st))),128))],544),[[l.u1,n.form.campus_id]])]),(0,s.Lk)("div",lt,[t[38]||(t[38]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Branch "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select neon-select","onUpdate:modelValue":t[12]||(t[12]=e=>n.form.branch_id=e),required:""},[n.form.campus_id?n.filteredBranches.length<1?((0,s.uX)(),(0,s.CE)("option",ot,"No branches in this campus yet.")):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("option",rt,"Please select a campus first.")),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.filteredBranches,e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,nt))),128))],512),[[l.u1,n.form.branch_id]])])],64)):(0,s.Q3)("",!0),2==n.form.role?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",it,[t[40]||(t[40]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Patron Type "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select neon-select","onUpdate:modelValue":t[13]||(t[13]=e=>n.form.patron_type_id=e),onChange:t[14]||(t[14]=(...e)=>i.resetPatronFields&&i.resetPatronFields(...e)),required:""},[t[39]||(t[39]=(0,s.Lk)("option",{value:""},"Select Type",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.patron_types,e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,dt))),128))],544),[[l.u1,n.form.patron_type_id]])]),1==n.form.patron_type_id||2==n.form.patron_type_id?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",ut,[t[42]||(t[42]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Campus "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select neon-select","onUpdate:modelValue":t[15]||(t[15]=e=>n.form.campus_id=e),onChange:t[16]||(t[16]=(...e)=>i.filterDepartments&&i.filterDepartments(...e)),required:""},[t[41]||(t[41]=(0,s.Lk)("option",{value:""},"Select Campus",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.campuses,e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,ct))),128))],544),[[l.u1,n.form.campus_id]])]),(0,s.Lk)("div",mt,[t[44]||(t[44]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Department "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select neon-select","onUpdate:modelValue":t[17]||(t[17]=e=>n.form.department_id=e),onChange:t[18]||(t[18]=(...e)=>i.filterPrograms&&i.filterPrograms(...e)),required:""},[t[43]||(t[43]=(0,s.Lk)("option",{value:""},"Select Department",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.departments,e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id,style:{"white-space":"normal","word-wrap":"break-word"}},(0,r.v_)(e.abbrev+" - "+e.name),9,pt))),128))],544),[[l.u1,n.form.department_id]])]),(0,s.Lk)("div",kt,[t[46]||(t[46]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("Program "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select neon-select","onUpdate:modelValue":t[19]||(t[19]=e=>n.form.program_id=e),required:""},[t[45]||(t[45]=(0,s.Lk)("option",{value:""},"Select Program",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.programs,e=>((0,s.uX)(),(0,s.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,bt))),128))],512),[[l.u1,n.form.program_id]])]),(0,s.Lk)("div",Lt,[t[47]||(t[47]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("ID Number "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[20]||(t[20]=e=>n.form.id_number=e),required:""},null,512),[[l.Jo,n.form.id_number,void 0,{trim:!0}]])])],64)):(0,s.Q3)("",!0),3==n.form.patron_type_id?((0,s.uX)(),(0,s.CE)("div",ht,[t[48]||(t[48]=(0,s.Lk)("label",{class:"form-label fw-semibold"},[(0,s.eW)("External Organization "),(0,s.Lk)("span",{class:"text-danger"},"*")],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[21]||(t[21]=e=>n.form.external_organization=e),placeholder:"e.g. ISU Roxas Campus",required:""},null,512),[[l.Jo,n.form.external_organization,void 0,{trim:!0}]])])):(0,s.Q3)("",!0)],64)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ft,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger px-4",onClick:t[22]||(t[22]=e=>i.closeModal(e))},"Cancel"),t[49]||(t[49]=(0,s.Lk)("button",{type:"submit",class:"btn btn-primary px-4"},[(0,s.Lk)("i",{class:"bi bi-save me-2"}),(0,s.eW)("Save User")],-1))])],32)])])])}a(8111),a(2489),a(3579);var vt={data(){return{form:{last_name:"",first_name:"",middle_initial:"",sex:"",role:"",email:"",campus_id:"",branch_id:"",id_number:"",department_id:"",program_id:"",patron_type_id:"",external_organization:"",username:"",contact_number:"",birthdate:""},autoEmail:!1,campuses:[],branches:[],departments:[],programs:[],patron_types:[],filteredBranches:[],filteredDepartments:[],filteredPrograms:[]}},methods:{filterBranches(){this.filteredBranches=this.branches.filter(e=>e.campus_id==this.form.campus_id),this.form.branch_id=""},async filterDepartments(){const e=await(0,$.VS)({id:this.form.campus_id});this.departments=e.data},async filterPrograms(){const e=await(0,$.Xv)({id:this.form.department_id});this.programs=e.data},resetPatronFields(){this.form.campus_id="",this.form.department_id="",this.form.program_id="",this.form.id_number="",this.form.external_organization=""},async submitForm(){(0,Pe.C)({message:"Adding new user..."});const e=await(0,Ve.MB)("a/user/create",{...this.form,pending_registration_approval:"0"});e.data&&"success"===e.data.status?((0,qe.w)({status:"success",title:"Success",message:e.data.message}),this.$emit("added"),this.resetForm(),this.closeModal()):(0,qe.w)({status:"error",title:"Error",message:e.data.message||"An error occurred while adding the user."})},async closeModal(e){if(e&&e.preventDefault(),this.hasUnsavedData()){const e=await(0,We.l)({title:"Close",message:"You have unsaved changes. Do you want to discard them?"});if(!e)return}const t=N.aF.getInstance(document.getElementById("addNewUser"));t.hide(),this.resetForm()},hasUnsavedData(){return Object.values(this.form).some(e=>""!==e&&null!==e)},resetForm(){for(let e in this.form)this.form[e]=""}},async mounted(){const e=await(0,$._Y)();this.patron_types=e.data;const t=await(0,$.Ye)();this.campuses=t.data;const a=await(0,$.r4)();this.branches=a.data},watch:{autoEmail(e){if(!e)return this.form.email="";!e||""!=this.form.last_name&&""!=this.form.first_name?this.form.email=this.form.first_name.replace(" ","").toLowerCase()+"."+(this.form.middle_initial?this.form.middle_initial+".":"")+this.form.last_name.replace(" ","-").toLowerCase()+"@isu.edu.ph":(setTimeout(()=>{this.autoEmail=!1}),(0,qe.w)({status:"error",title:"Error",message:"You need to enter the first and last name before automating email."}))}}};const yt=(0,T.A)(vt,[["render",gt]]);var _t=yt;const wt={class:"table table-hover table-striped table-responsive overflow-auto align-middle"},Ct={key:0},xt=["onClick"],Ut={class:"hstack gap-3"},Et={class:"hstack"},At=["src"],Xt={class:"vstack"},It={class:"text-muted"},Ft={key:2};function St(e,t,a,l,o,n){return(0,s.uX)(),(0,s.CE)("table",wt,[t[2]||(t[2]=(0,s.Lk)("thead",{class:"position-sticky top-0"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{class:"tdh px-4"},"#"),(0,s.Lk)("th",{class:"w-50"},"Name"),(0,s.Lk)("th",null,"Role"),(0,s.Lk)("th",null,"Account Status")])],-1)),(0,s.Lk)("tbody",null,[a.fetching?((0,s.uX)(),(0,s.CE)("tr",Ct,t[0]||(t[0]=[(0,s.Lk)("td",{colspan:"5"},[(0,s.Lk)("p",{class:"placeholder-glow mb-0"},[(0,s.Lk)("span",{class:"placeholder col-12"})])],-1)]))):a.users&&a.users.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(a.users,(e,t)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id,onClick:t=>{n.details(e.id),n.selectedUser(e)}},[(0,s.Lk)("td",null,(0,r.v_)(t+1),1),(0,s.Lk)("td",Ut,[(0,s.Lk)("div",Et,[(0,s.Lk)("img",{src:o.pfp,alt:"",class:"rounded-5",style:{width:"45px"}},null,8,At)]),(0,s.Lk)("div",Xt,[(0,s.Lk)("span",null,(0,r.v_)(e.last_name)+", "+(0,r.v_)(e.first_name)+" "+(0,r.v_)(e.middle_initial?e.middle_initial+".":""),1),(0,s.Lk)("small",It,(0,r.v_)(e.email),1)])]),(0,s.Lk)("td",null,(0,r.v_)(e.roleText||e.role||"Human"),1),(0,s.Lk)("td",null,(0,r.v_)("1"===e.pending_registration_approval?"Pending Approval":"0"===e.status?"Active":"1"===e.status?"Inactive":"Expired"),1)],8,xt))),128)):((0,s.uX)(),(0,s.CE)("tr",Ft,t[1]||(t[1]=[(0,s.Lk)("td",{colspan:"5",class:"text-center text-muted py-3"},"No data to show.",-1)])))])])}var Dt=a(3153),Pt={props:{users:Array,fetching:Boolean},data(){return{pfp:Dt,data:[]}},methods:{details(e){this.$emit("selected-id",e)},selectedUser(e){this.$emit("selected:user",e)}},mounted(){console.log(this.fetching)}};const qt=(0,T.A)(Pt,[["render",St]]);var Wt=qt,Vt={name:"LibraryInformationPage",components:{ListPage:Wt,SearchInput:R,UserInformationPage:Me,AddNewUserPage:_t},created(){this.fetchUsers()},computed:{pages(){return Array.from({length:$.IG.pagination?.last_page||1},(e,t)=>t+1)}},data(){return{showDetails:!1,selectedId:null,fetchingUsers:!1,debounceTimer:null,query:"",params:{sort:"last_name",order:"asc",status:"",role:"",entries:"25",page:"1",campus:""},pagination:{total:"",per_page:"",current_page:"",last_page:""},campuses:[],users:[],selectedUser:[]}},methods:{updatePage(e){this.showDetails=e},selectedUserId(e){if(this.selectedId===e&&!0===this.showDetails)return this.updatePage(!1);this.selectedId=e,this.updatePage(!0)},async applyFilter(){const e=document.getElementById("filterBtn"),t=N.ms.getInstance(e)||new N.ms(e);t.hide(),$.IG.users=null,await this.fetchUsers()},async applySort(){const e=document.getElementById("sortBtn"),t=N.ms.getInstance(e)||new N.ms(e);t.hide(),$.IG.users=null,await this.fetchUsers()},async fetchUsers(){this.fetchingUsers=!0,this.showDetails=!1;try{const e=await(0,$.hU)(this.params);this.users=e.data,this.pagination={total:e.total,per_page:e.per_page,current_page:e.current_page,last_page:e.last_page}}finally{this.fetchingUsers=!1}},async refresh(){$.IG.users=null,this.params.sort="last_name",this.params.order="asc",this.params.status="",this.params.role="",this.params.entries="25",this.params.page="1",this.params.campus="",await this.fetchUsers()}},async mounted(){const e=await(0,$.Ye)();this.campuses=e.data},watch:{"params.page"(){$.IG.users=null,this.fetchUsers()},"params.entries"(){$.IG.users=null,this.fetchUsers()},"params.query"(){clearTimeout(this.debounceTimer),$.IG.users=null,this.debounceTimer=setTimeout(()=>{this.fetchUsers()},500)}}};const Bt=(0,T.A)(Vt,[["render",B]]);var $t=Bt},3153:function(e,t,a){e.exports=a.p+"img/logo.5092d4aa.png"},3973:function(e,t,a){a.d(t,{l:function(){return r}});var s=a(4874),l=a.n(s);const r=async({title:e,message:t})=>l().fire({title:e,text:t,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then(e=>e.isConfirmed)},5719:function(e,t,a){a.d(t,{ES:function(){return s},KY:function(){return i},Sn:function(){return l},Yq:function(){return o},fF:function(){return n},sL:function(){return r}});a(8111),a(1701);const s=e=>e?e.charAt(0).toUpperCase()+e.slice(1):null,l=e=>e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),r=e=>{if(console.log(e),!e)return"-";const t=new Date(e);return t.toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"})},o=e=>{if(!e)return null;const t=new Date(e);return t.toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},n=e=>{if(!e)return null;const t=new Date,a=new Date(e),s=Math.floor((t-a)/1e3);return s<60?`${s} sec${1!==s?"s":""} ago`:s<3600?`${Math.floor(s/60)} min${1!==Math.floor(s/60)?"s":""} ago`:s<86400?`${Math.floor(s/3600)} hr${1!==Math.floor(s/3600)?"s":""} ago`:`${Math.floor(s/86400)} day${1!==Math.floor(s/86400)?"s":""} ago`},i=e=>{if(!e)return"N/A";const[t,a]=e.split(":").map(Number),s=t>=12?"PM":"AM",l=t%12||12;return`${l}:${a.toString().padStart(2,"0")} ${s}`}}}]);
//# sourceMappingURL=5170.75161c38.js.map